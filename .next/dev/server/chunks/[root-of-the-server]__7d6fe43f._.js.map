{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Downloads/inventory-management-system/lib/db.ts"],"sourcesContent":["import mysql from 'mysql2/promise'\r\n\r\nconst pool = mysql.createPool({\r\n  host: process.env.DB_HOST || '127.0.0.1',\r\n  user: process.env.DB_USER || 'root',\r\n  password: process.env.DB_PASSWORD || '',\r\n  database: process.env.DB_DATABASE || 'kimchuyy_agrivet',\r\n  port: Number(process.env.DB_PORT || 3306),\r\n  waitForConnections: true,\r\n  connectionLimit: 10,\r\n  queueLimit: 0,\r\n})\r\n\r\nexport async function query(sql: string, params?: any[]) {\r\n  const [rows] = await pool.query(sql, params)\r\n  return rows\r\n}\r\n\r\nexport default pool\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,OAAO,8IAAK,CAAC,UAAU,CAAC;IAC5B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,UAAU,QAAQ,GAAG,CAAC,WAAW,IAAI;IACrC,UAAU,QAAQ,GAAG,CAAC,WAAW,IAAI;IACrC,MAAM,OAAO,QAAQ,GAAG,CAAC,OAAO,IAAI;IACpC,oBAAoB;IACpB,iBAAiB;IACjB,YAAY;AACd;AAEO,eAAe,MAAM,GAAW,EAAE,MAAc;IACrD,MAAM,CAAC,KAAK,GAAG,MAAM,KAAK,KAAK,CAAC,KAAK;IACrC,OAAO;AACT;uCAEe"}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Downloads/inventory-management-system/app/api/customers/route.ts"],"sourcesContent":["import { query } from \"@/lib/db\"\r\nimport { NextRequest, NextResponse } from \"next/server\"\r\n\r\nexport async function GET() {\r\n  try {\r\n    const results = await query(\r\n      `SELECT customer_id, name, phone, email, address, created_at,\r\n              (SELECT COUNT(*) FROM sales WHERE customer_id = customers.customer_id) as total_purchases\r\n       FROM customers\r\n       ORDER BY name ASC`,\r\n      [],\r\n    )\r\n\r\n    return NextResponse.json({ customers: results })\r\n  } catch (error) {\r\n    console.error(\"GET /api/customers error:\", error)\r\n    return NextResponse.json({ error: \"Failed to fetch customers\" }, { status: 500 })\r\n  }\r\n}\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const body = await request.json()\r\n    const { name, phone, email, address } = body\r\n\r\n    if (!name) {\r\n      return NextResponse.json({ error: \"Customer name is required\" }, { status: 400 })\r\n    }\r\n\r\n    const result = await query(\r\n      `INSERT INTO customers (name, phone, email, address, created_at)\r\n       VALUES (?, ?, ?, ?, NOW())`,\r\n      [name, phone || null, email || null, address || null],\r\n    )\r\n\r\n    return NextResponse.json({\r\n      customer_id: (result as any).insertId,\r\n      message: \"Customer created successfully\",\r\n    })\r\n  } catch (error) {\r\n    console.error(\"POST /api/customers error:\", error)\r\n    return NextResponse.json({ error: \"Failed to create customer\" }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,oHAAK,EACzB,CAAC;;;wBAGiB,CAAC,EACnB,EAAE;QAGJ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,WAAW;QAAQ;IAChD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA4B,GAAG;YAAE,QAAQ;QAAI;IACjF;AACF;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;QAExC,IAAI,CAAC,MAAM;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA4B,GAAG;gBAAE,QAAQ;YAAI;QACjF;QAEA,MAAM,SAAS,MAAM,IAAA,oHAAK,EACxB,CAAC;iCAC0B,CAAC,EAC5B;YAAC;YAAM,SAAS;YAAM,SAAS;YAAM,WAAW;SAAK;QAGvD,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,aAAa,AAAC,OAAe,QAAQ;YACrC,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA4B,GAAG;YAAE,QAAQ;QAAI;IACjF;AACF"}}]
}