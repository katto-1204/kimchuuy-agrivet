{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Downloads/inventory-management-system/lib/db.ts"],"sourcesContent":["import mysql from 'mysql2/promise'\r\n\r\nconst pool = mysql.createPool({\r\n  host: process.env.DB_HOST || '127.0.0.1',\r\n  user: process.env.DB_USER || 'root',\r\n  password: process.env.DB_PASSWORD || '',\r\n  database: process.env.DB_DATABASE || 'kimchuyy_agrivet',\r\n  port: Number(process.env.DB_PORT || 3306),\r\n  waitForConnections: true,\r\n  connectionLimit: 10,\r\n  queueLimit: 0,\r\n})\r\n\r\nexport async function query(sql: string, params?: any[]) {\r\n  const [rows] = await pool.query(sql, params)\r\n  return rows\r\n}\r\n\r\nexport default pool\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,OAAO,8IAAK,CAAC,UAAU,CAAC;IAC5B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,UAAU,QAAQ,GAAG,CAAC,WAAW,IAAI;IACrC,UAAU,QAAQ,GAAG,CAAC,WAAW,IAAI;IACrC,MAAM,OAAO,QAAQ,GAAG,CAAC,OAAO,IAAI;IACpC,oBAAoB;IACpB,iBAAiB;IACjB,YAAY;AACd;AAEO,eAAe,MAAM,GAAW,EAAE,MAAc;IACrD,MAAM,CAAC,KAAK,GAAG,MAAM,KAAK,KAAK,CAAC,KAAK;IACrC,OAAO;AACT;uCAEe"}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Downloads/inventory-management-system/app/api/products/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\r\nimport { query } from '@/lib/db'\r\n\r\nexport async function GET() {\r\n  try {\r\n    const rows = await query(`\r\n      SELECT p.*, c.name as category_name\r\n      FROM products p\r\n      LEFT JOIN categories c ON p.category_id = c.category_id\r\n      WHERE p.is_archived = FALSE\r\n      ORDER BY p.product_id DESC\r\n    `)\r\n    return NextResponse.json({ products: rows })\r\n  } catch (err) {\r\n    return NextResponse.json({ error: String(err) }, { status: 500 })\r\n  }\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const body = await req.json()\r\n    const {\r\n      name,\r\n      category_id,\r\n      description,\r\n      sku,\r\n      price,\r\n      cost_price,\r\n      stock,\r\n      min_stock,\r\n      expiry_date,\r\n    } = body\r\n\r\n    const res = await query(\r\n      `INSERT INTO products (category_id, name, description, sku, price, cost_price, stock, min_stock, expiry_date)\r\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,\r\n      [\r\n        category_id || null,\r\n        name,\r\n        description || null,\r\n        sku || null,\r\n        price || 0,\r\n        cost_price || null,\r\n        stock || 0,\r\n        min_stock || 0,\r\n        expiry_date || null,\r\n      ],\r\n    )\r\n\r\n    // get inserted id\r\n    // @ts-ignore\r\n    const insertId = (res as any).insertId\r\n    const rows = await query(\r\n      `SELECT p.*, c.name as category_name FROM products p LEFT JOIN categories c ON p.category_id = c.category_id WHERE p.product_id = ?`,\r\n      [insertId],\r\n    )\r\n\r\n    return NextResponse.json((rows as any[])[0])\r\n  } catch (err) {\r\n    return NextResponse.json({ error: String(err) }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,OAAO,MAAM,IAAA,oHAAK,EAAC,CAAC;;;;;;IAM1B,CAAC;QACD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,UAAU;QAAK;IAC5C,EAAE,OAAO,KAAK;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,OAAO;QAAK,GAAG;YAAE,QAAQ;QAAI;IACjE;AACF;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EACJ,IAAI,EACJ,WAAW,EACX,WAAW,EACX,GAAG,EACH,KAAK,EACL,UAAU,EACV,KAAK,EACL,SAAS,EACT,WAAW,EACZ,GAAG;QAEJ,MAAM,MAAM,MAAM,IAAA,oHAAK,EACrB,CAAC;yCACkC,CAAC,EACpC;YACE,eAAe;YACf;YACA,eAAe;YACf,OAAO;YACP,SAAS;YACT,cAAc;YACd,SAAS;YACT,aAAa;YACb,eAAe;SAChB;QAGH,kBAAkB;QAClB,aAAa;QACb,MAAM,WAAW,AAAC,IAAY,QAAQ;QACtC,MAAM,OAAO,MAAM,IAAA,oHAAK,EACtB,CAAC,kIAAkI,CAAC,EACpI;YAAC;SAAS;QAGZ,OAAO,gJAAY,CAAC,IAAI,CAAC,AAAC,IAAc,CAAC,EAAE;IAC7C,EAAE,OAAO,KAAK;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,OAAO;QAAK,GAAG;YAAE,QAAQ;QAAI;IACjE;AACF"}}]
}