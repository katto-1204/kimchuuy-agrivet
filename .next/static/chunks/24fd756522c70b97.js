(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88511,e=>{"use strict";let t=(0,e.i(75254).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],88511)},94179,e=>{"use strict";var t=e.i(43476),a=e.i(91918),s=e.i(25913),r=e.i(47163);let l=(0,s.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:s,asChild:i=!1,...n}){let c=i?a.Slot:"span";return(0,t.jsx)(c,{"data-slot":"badge",className:(0,r.cn)(l({variant:s}),e),...n})}e.s(["Badge",()=>i])},47627,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...s})})}function r({className:e,...s}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...s})}function l({className:e,...s}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...s})}function i({className:e,...s}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...s})}function n({className:e,...s}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}function c({className:e,...s}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}e.s(["Table",()=>s,"TableBody",()=>l,"TableCell",()=>c,"TableHead",()=>n,"TableHeader",()=>r,"TableRow",()=>i])},22915,e=>{"use strict";let t=(0,e.i(75254).default)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);e.s(["Archive",()=>t],22915)},78894,3116,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>a],78894);let s=(0,t.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>s],3116)},20800,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(43694),r=e.i(49786),l=e.i(70065),i=e.i(67881),n=e.i(23750),c=e.i(94179),d=e.i(47627),o=e.i(63415),x=e.i(55436),h=e.i(7233);let u=(0,e.i(75254).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var m=e.i(41071),g=e.i(86536),p=e.i(88511),j=e.i(22915),f=e.i(88844),b=e.i(78894),w=e.i(3116),v=e.i(22016),y=e.i(27250);function N(){let[e,N]=(0,a.useState)(""),[k,C]=(0,a.useState)(null),[T,_]=(0,a.useState)("all"),[D,S]=(0,a.useState)([]),[M,H]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=!0;return async function(){try{let t=await fetch("/api/products");if(!t.ok)throw Error("Failed to fetch products");let a=await t.json();e&&S(a.products||[])}catch(e){console.error(e)}finally{e&&H(!1)}}(),()=>{e=!1}},[]);let A=(0,a.useMemo)(()=>D.filter(t=>{if(t.is_archived)return!1;let a=t.name.toLowerCase().includes(e.toLowerCase())||t.sku?.toLowerCase().includes(e.toLowerCase()),s=null===k||t.category_id===k,r=!0;if("low"===T)r=t.stock<=t.min_stock&&t.stock>0;else if("out"===T)r=0===t.stock;else if("expiring"===T){if(!t.expiry_date)return!1;let e=new Date;e.setDate(e.getDate()+30),r=new Date(t.expiry_date)<=e}return a&&s&&r}),[D,e,k,T]),B={total:D.filter(e=>!e.is_archived).length,lowStock:D.filter(e=>!e.is_archived&&e.stock<=e.min_stock&&e.stock>0).length,outOfStock:D.filter(e=>!e.is_archived&&0===e.stock).length,expiring:D.filter(e=>{if(!e.expiry_date||e.is_archived)return!1;let t=new Date;return t.setDate(t.getDate()+30),new Date(e.expiry_date)<=t}).length};return(0,t.jsxs)(s.ProtectedLayout,{children:[(0,t.jsx)(r.Header,{title:"Inventory",subtitle:"Manage your product inventory"}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)("button",{onClick:()=>_("all"),children:(0,t.jsx)(l.Card,{className:`hover:shadow-md transition-shadow cursor-pointer ${"all"===T?"ring-2 ring-primary":""}`,children:(0,t.jsxs)(l.CardContent,{className:"p-4 flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:(0,t.jsx)(f.Package,{className:"h-6 w-6 text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-foreground",children:B.total}),(0,t.jsx)("p",{className:"text-sm text-muted",children:"Total Products"})]})]})})}),(0,t.jsx)("button",{onClick:()=>_("low"),children:(0,t.jsx)(l.Card,{className:`hover:shadow-md transition-shadow cursor-pointer ${"low"===T?"ring-2 ring-warning":""}`,children:(0,t.jsxs)(l.CardContent,{className:"p-4 flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-warning/10 rounded-xl flex items-center justify-center",children:(0,t.jsx)(b.AlertTriangle,{className:"h-6 w-6 text-warning"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-foreground",children:B.lowStock}),(0,t.jsx)("p",{className:"text-sm text-muted",children:"Low Stock"})]})]})})}),(0,t.jsx)("button",{onClick:()=>_("out"),children:(0,t.jsx)(l.Card,{className:`hover:shadow-md transition-shadow cursor-pointer ${"out"===T?"ring-2 ring-danger":""}`,children:(0,t.jsxs)(l.CardContent,{className:"p-4 flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-danger/10 rounded-xl flex items-center justify-center",children:(0,t.jsx)(f.Package,{className:"h-6 w-6 text-danger"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-foreground",children:B.outOfStock}),(0,t.jsx)("p",{className:"text-sm text-muted",children:"Out of Stock"})]})]})})}),(0,t.jsx)("button",{onClick:()=>_("expiring"),children:(0,t.jsx)(l.Card,{className:`hover:shadow-md transition-shadow cursor-pointer ${"expiring"===T?"ring-2 ring-warning":""}`,children:(0,t.jsxs)(l.CardContent,{className:"p-4 flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-warning/10 rounded-xl flex items-center justify-center",children:(0,t.jsx)(w.Clock,{className:"h-6 w-6 text-warning"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-foreground",children:B.expiring}),(0,t.jsx)("p",{className:"text-sm text-muted",children:"Expiring Soon"})]})]})})})]}),(0,t.jsx)(l.Card,{children:(0,t.jsx)(l.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 flex-1 w-full lg:w-auto",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)(x.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted"}),(0,t.jsx)(n.Input,{type:"search",placeholder:"Search by name or SKU...",value:e,onChange:e=>N(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(o.DropdownMenu,{children:[(0,t.jsx)(o.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(i.Button,{variant:"outline",className:"gap-2 bg-transparent",children:[(0,t.jsx)(u,{className:"h-4 w-4"}),k?y.mockCategories.find(e=>e.category_id===k)?.name:"All Categories"]})}),(0,t.jsxs)(o.DropdownMenuContent,{children:[(0,t.jsx)(o.DropdownMenuItem,{onClick:()=>C(null),children:"All Categories"}),y.mockCategories.map(e=>(0,t.jsx)(o.DropdownMenuItem,{onClick:()=>C(e.category_id),children:e.name},e.category_id))]})]})]}),(0,t.jsx)(v.default,{href:"/inventory/add",children:(0,t.jsxs)(i.Button,{className:"bg-primary hover:bg-primary-dark text-white gap-2",children:[(0,t.jsx)(h.Plus,{className:"h-4 w-4"}),"Add Product"]})})]})})}),(0,t.jsx)(l.Card,{children:(0,t.jsx)(l.CardContent,{className:"p-0",children:(0,t.jsxs)(d.Table,{children:[(0,t.jsx)(d.TableHeader,{children:(0,t.jsxs)(d.TableRow,{children:[(0,t.jsx)(d.TableHead,{children:"Product"}),(0,t.jsx)(d.TableHead,{children:"SKU"}),(0,t.jsx)(d.TableHead,{children:"Category"}),(0,t.jsx)(d.TableHead,{className:"text-right",children:"Price"}),(0,t.jsx)(d.TableHead,{className:"text-center",children:"Stock"}),(0,t.jsx)(d.TableHead,{children:"Status"}),(0,t.jsx)(d.TableHead,{children:"Expiry"}),(0,t.jsx)(d.TableHead,{className:"text-right",children:"Actions"})]})}),(0,t.jsxs)(d.TableBody,{children:[A.map(e=>(0,t.jsxs)(d.TableRow,{children:[(0,t.jsx)(d.TableCell,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.name}),e.description&&(0,t.jsx)("p",{className:"text-xs text-muted line-clamp-1",children:e.description})]})}),(0,t.jsx)(d.TableCell,{className:"text-muted",children:e.sku}),(0,t.jsx)(d.TableCell,{children:(0,t.jsx)(c.Badge,{variant:"outline",children:e.category_name})}),(0,t.jsxs)(d.TableCell,{className:"text-right font-medium",children:["â‚±",e.price.toLocaleString("en-PH",{minimumFractionDigits:2})]}),(0,t.jsxs)(d.TableCell,{className:"text-center",children:[(0,t.jsx)("span",{className:e.stock<=e.min_stock?"text-warning font-semibold":"",children:e.stock}),(0,t.jsxs)("span",{className:"text-muted text-xs",children:[" / min ",e.min_stock]})]}),(0,t.jsx)(d.TableCell,{children:0===e.stock?(0,t.jsx)(c.Badge,{variant:"destructive",children:"Out of Stock"}):e.stock<=e.min_stock?(0,t.jsx)(c.Badge,{className:"bg-warning text-white",children:"Low Stock"}):(0,t.jsx)(c.Badge,{className:"bg-success text-white",children:"In Stock"})}),(0,t.jsx)(d.TableCell,{children:e.expiry_date?(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-sm",children:new Date(e.expiry_date).toLocaleDateString("en-PH",{month:"short",day:"numeric",year:"numeric"})}),(e=>{if(!e.expiry_date)return null;let a=new Date(e.expiry_date),s=new Date,r=new Date;return(r.setDate(s.getDate()+30),a<s)?(0,t.jsx)(c.Badge,{variant:"destructive",children:"Expired"}):a<=r?(0,t.jsx)(c.Badge,{className:"bg-warning text-white",children:"Expiring Soon"}):null})(e)]}):(0,t.jsx)("span",{className:"text-muted",children:"N/A"})}),(0,t.jsx)(d.TableCell,{className:"text-right",children:(0,t.jsxs)(o.DropdownMenu,{children:[(0,t.jsx)(o.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(m.MoreHorizontal,{className:"h-4 w-4"})})}),(0,t.jsxs)(o.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(o.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(v.default,{href:`/inventory/${e.product_id}`,className:"flex items-center gap-2",children:[(0,t.jsx)(g.Eye,{className:"h-4 w-4"})," View Details"]})}),(0,t.jsx)(o.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(v.default,{href:`/inventory/${e.product_id}/edit`,className:"flex items-center gap-2",children:[(0,t.jsx)(p.Edit,{className:"h-4 w-4"})," Edit"]})}),(0,t.jsxs)(o.DropdownMenuItem,{onClick:async()=>{try{await fetch(`/api/products/${e.product_id}`,{method:"DELETE"}),S(t=>t.filter(t=>t.product_id!==e.product_id))}catch(e){console.error(e)}},className:"text-danger",children:[(0,t.jsx)(j.Archive,{className:"h-4 w-4 mr-2"})," Archive"]})]})]})})]},e.product_id)),0===A.length&&(0,t.jsx)(d.TableRow,{children:(0,t.jsx)(d.TableCell,{colSpan:8,className:"h-32 text-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center text-muted",children:[(0,t.jsx)(f.Package,{className:"h-12 w-12 mb-2"}),(0,t.jsx)("p",{className:"font-medium",children:"No products found"}),(0,t.jsx)("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})})})]})]})})})]})]})}e.s(["default",()=>N],20800)}]);